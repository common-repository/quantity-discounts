(function(B){"use strict";B(document).ready(function(){B("#quantity_pricing, #preview").attr("style","");B(".tabs a").click(function(e){e.preventDefault();var i=B(this).attr("href");B(".tabs a").removeClass("active");B(".panel").removeClass("active");B(this).addClass("active");B(i).addClass("active")});B(document).on("click",".notice.is-dismissible",function(){console.log("clicked");var e={action:"WIRNQDSQ_dismiss_admin_notice",nonce:wpironscripts.nonce};B.post(wpironscripts.ajaxurl,e,function(e){console.log("Notice dismissed")})});var l=B("#quantity_discounts_container");function i(e,i="",a="",t="",n="",d=""){var s=p(a);var c=`
                <div class="quantity_discount_block">
                    <div class="field-blocks">
                        <div class="block">
                            <h4 style="margin:0; padding:0;">Quantity</h4>
                            <input type="number" id="_wpiron_qd_quantity_${e}" placeholder="Quantity" name="_wpiron_qd_quantity[${e}]" min="0" value="${i}" />
                        </div>
                        <div class="block">
                            <h4 style="margin:0; padding:0;">Price (${quantityDiscountsSettings.currencySymbol}) (total amount)</h4>
                            <input type="number" id="_wpiron_qd_price_${e}" placeholder="Price" name="_wpiron_qd_price[${e}]" min="0" step="any" value="${a}" />
                        </div>
                        <div class="block">
                            <h4 style="margin:0; padding:0;">Label</h4>
                            <input type="text" id="_wpiron_qd_label_${e}" placeholder="Label" name="_wpiron_qd_label[${e}]" value="${t}" />
                        </div>
                        <div class="block">
                            <h4 style="margin:0; padding:0;">Description</h4>
                            <textarea id="_wpiron_qd_description_${e}" placeholder="Description" name="_wpiron_qd_description[${e}]">${n}</textarea>
                        </div>
                        <div class="block">
                            <h4 style="margin:0; padding:0;">Badge Text</h4>
                            <a style="color:darkgreen; display:inline-block; font-weight:700;" target="_blank" href="https://wpiron.com/products/quantity-breaks-and-discounts/">Upgrade To
        Premium!</a>
                        </div>
                    </div>
                    <button type="button" class="delete_quantity_discount">Delete</button>
                </div>
            `;l.append(c)}function p(e,i){var a=e.toString().split(".");var t=a[0];var n=a[1]||"00";switch(i){case"EUR":return"â‚¬"+t+","+n;case"USD":default:return"$"+t+"."+n}}B("#add_quantity_discount").on("click",function(){var e=l.children(".quantity_discount_block").length;i(e)});B("#quantity_discounts_container").on("click",".delete_quantity_discount",function(){B(this).closest(".quantity_discount_block").remove();o()});if(typeof quantity_discounts_data!=="undefined"&&quantity_discounts_data.quantities.length>0){var e=quantity_discounts_data.quantities||[];var a=quantity_discounts_data.prices||[];var t=quantity_discounts_data.labels||[];var n=quantity_discounts_data.descriptions||[];var d=quantity_discounts_data.badge_text||[];var _=quantity_discounts_data.badge||[];for(var s=0;s<e.length;s++){i(s,e[s],a[s],t[s],n[s],d[s])}}else if(B("#post_ID").val()){var c=B("#_regular_price").val()||"";i(0,1,c)}o();B("#quantity_discounts_container").on("input",".quantity_discount_block input, .quantity_discount_block textarea",function(){o()});function o(){var e=B("#quantity_discounts_container");var r=B("#quantity_discounts_preview");r.empty();var u=0;e.find(".quantity_discount_block").each(function(){var e=B(this).find('input[name^="_wpiron_qd_quantity"]').val();var i=B(this).find('input[name^="_wpiron_qd_price"]').val();var a=B(this).find('input[name^="_wpiron_qd_label"]').val();var t=B(this).find('textarea[name^="_wpiron_qd_description"]').val();var n=B(this).find('textarea[name^="_wpiron_qd_badge_text"]').val();if(e==1){u=i}var d="";if(e>1){var s=u*e;if(s>i){d=`<span><s>${p(s.toFixed(2))}</s></span>`}}B(".badges-preview").removeClass("active");if(_==="badge1"){B(".badge-price-star_preview").addClass("active")}else if(_==="badge2"){B(".circle-badge_preview").addClass("active")}else if(_==="badge3"){B(".rect-badge_preview").addClass("active")}let c="";if(_==="badge1"||_==="badge2"){c="badge-inside"}let l="";if(n&&_==="badge1"){l=`<div id="badge-container" class="badge-price-star_container"> 
                    <div class="badge-price-star_preview badge-price-star badges-preview"> 
                    <div class="price"> 
                    <span class="label">${n}</span>
                    </div>
                    </div>
                    </div>`}if(n&&_==="badge2"){l=`<div id="badge-container" class="circle-badge_container"> 
                    <div class="circle-badge_preview circle-badge badges-preview active">${n}</div>
                    </div>`}if(n&&_==="badge3"){l=`<div id="badge-container" class="rect-badge_container"> 
                    <div class="rect-badge_preview rect-badge badges-preview ">${n}</div>
                    </div>`}var o=`
                    <span class="wpiqd-swatch" data-value="${e}">
                        <div class="wpiqd-inner">
                        <div class="one-block">
                            <div class="wpiqd-radio">
                                <input value="${e}" type="radio">
                                <span></span>
                            </div>
                        </div>
                        <div class="second-block ${c}">
                            <div class="wpiqd-middle">
                                <div class="wpiqd-heading">${a}</div>
                                <div class="wpiqd-subheading">${t}</div>
                            </div>
                            <div class="wpiqd-right">
                                <span class="wpiqd-price">${p(i)}</span>
                                <div class="old-price">${d}</div>
                            </div>
                        </div>
                        </div>
                        ${l}
                    </span>
                `;r.append(o)});r.find(".wpiqd-swatch").first().addClass("active");r.find(".wpiqd-swatch").first().find('input[type="radio"]').prop("checked",true);r.on("click",".wpiqd-swatch",function(){B(".wpiqd-swatch").removeClass("active");B(".wpiqd-swatch").find('input[type="radio"]').prop("checked",false);B(this).addClass("active");B(this).find('input[type="radio"]').prop("checked",true)});r.on("change",'.wpiqd-swatch input[type="radio"]',function(){B(".wpiqd-swatch").removeClass("active");B(".wpiqd-swatch").find('input[type="radio"]').prop("checked",false);B(this).closest(".wpiqd-swatch").addClass("active");B(this).prop("checked",true)})}if(typeof quantity_discounts_data!=="undefined"){var r=quantity_discounts_data.quantity_enabled;var u=quantity_discounts_data.min_max_enabled;var v=quantity_discounts_data.min_value;var y=quantity_discounts_data.max_value;var b=quantity_discounts_data.display_method;var m=document.querySelector('input[name="_wpiron_qd_quantity_enabled"][value="enable"]');var q=document.querySelector('input[name="_wpiron_qd_quantity_enabled"][value="disable"]');var h=document.querySelector('input[name="_wpiron_qd_min_max_enabled"][value="enable"]');var w=document.querySelector('input[name="_wpiron_qd_min_max_enabled"][value="disable"]');var f=document.querySelector(".quantity_pricing_tab");var g=document.querySelector(".preview_tab");var k=document.getElementById("min_max_values");var $=document.getElementById("display_method");var x=document.querySelector('input[name="_wpiron_qd_display_method"][value="dropdown"]');var S=document.querySelector('input[name="_wpiron_qd_display_method"][value="buttons"]');m.checked=r==="enable";q.checked=r==="disable";h.checked=u==="enable";w.checked=u==="disable";k.style.display=u==="enable"?"block":"none";x.checked=b==="dropdown";S.checked=b==="buttons";k.querySelector('input[name="_wpiron_qd_min_value"]').value=v;k.querySelector('input[name="_wpiron_qd_max_value"]').value=y;f.style.display="none";g.style.display="none";m.addEventListener("change",C);q.addEventListener("change",C);h.addEventListener("change",E);w.addEventListener("change",E);function C(){if(m.checked){h.disabled=true;w.checked=true;k.style.display="none";x.parentElement.style.display="none";f.style.display="inline-block";g.style.display="inline-block";B("#quantity_discounts_preview").show();B("#quantity_discounts_notice_customise").show();B("#minmax_notice_customise").hide();B("#min_max_preview").hide()}else{B("#quantity_discounts_preview").hide();B("#quantity_discounts_notice_customise").hide();B("#minmax_notice_customise").show();B("#min_max_preview").show();h.disabled=false;w.disabled=false;f.style.display="none";g.style.display="none"}}function E(){if(h.checked){m.disabled=true;q.checked=true;k.style.display="block";x.parentElement.style.display="block";f.style.display="none";g.style.display="inline-block";k.style.display="inline-block"}else{m.disabled=false;q.disabled=false;f.style.display="none";g.style.display="none";k.style.display="none";$.style.display="none"}}C();E();if(m.checked){h.disabled=true;w.checked=true;k.style.display="none";x.parentElement.style.display="none";f.style.display="inline-block";g.style.display="inline-block";B("#quantity_discounts_preview").show();B("#min_max_preview").hide()}}else{console.error("quantity_discounts_data is not defined")}let D=1;let L=10;let Q=B("#minmax_preview");function I(){Q.empty();for(let e=D;e<=L;e++){const i=B('<span class="minmax-buttons"></span>');i.text(e);if(e===3){i.addClass("active")}Q.append(i)}}I()})})(jQuery);